\documentclass{article}
\usepackage{linemarkup}
\usepackage{showexpl}
\usepackage{url}
\begin{document}

\title{The \textit{Linemarkup} Package\\Line oriented markup for LuaLaTeX}
\author{Michal Hoftich}

\maketitle





# sample section

- items 
- more items

\bgroup
% \linemarkupselect{something}
\noindent normální text
\egroup

Cože

```
ble
- ahoj
```

- a zase item

\LinemarkupDisable

\NewDocumentCommand{\showexample}{+v}{%
\directlua{
local test = [[#1]]
local lines = linemarkup.lines(test)
tex.print('\\begin{verbatim}')
for _, line in pairs(lines) do
  tex.print(line)
end
tex.print('\\end{verbatim}')
linemarkup.active = true
linemarkup.process_lines(test, "default")
}
}

\showexample{
# will this work?

- lets see
}

\LinemarkupDisable
\begin{luacode*}
  -- I want to print verbatim code and the parset result
local test = [[
- hello
- world
]]
local lines = linemarkup.lines(test)

tex.print('\\begin{verbatim}')
for _, line in pairs(lines) do
  tex.print(line)
end
tex.print('\\end{verbatim}')
linemarkup.active = true
linemarkup.process_lines(test, "default")
\end{luacode*}
\LinemarkupEnable
% \LinemarkupPrint{#1}
% }



% \def\hello{\detokenize{%
% - nazdarek
% - ty jo
%  }
% }

% \directlua{%
% tex.sprint('\\begin{verbatim}')
% tex.sprint([[\hello]])
% tex.sprint('\\end{verbatim}')
% }
% \expandafter\LinemarkupPrint{\hello}


\end{document}

