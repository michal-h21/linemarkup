\ProvidesPackage{linemarkup}
\RequirePackage{luacode}
\begin{luacode*}
linemarkup = linemarkup or require "linemarkup-lib"
linemarkup_parsers = {}

local parse = linemarkup.new_parser()
parse:add_rule("#", "", "\\section{%1}")
parse:add_rule("-", "",  "\\linemarkupitemize{%1}")

local function process(line)
return parse:parse_line(line)
end
luatexbase.add_to_callback("process_input_buffer", process, "linemarkup")


\end{luacode*}


\newcommand\linemarkupitemize[1]{\begingroup\noindent\llap{$\bullet$\enspace}\ignorespaces\leftskip=\parindent #1\par\endgroup}

\endinput
